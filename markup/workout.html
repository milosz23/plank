<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plank - Workout</title>
    <style>

        #container {
            width:480px;
            height: 840px;
            border: 3px dashed grey;
            text-align: center;

        }

        #timer {
            font-size: 75px;
            color: white;
            margin: 50px 0 0 0;
            display: block;
        }
    </style>
</head>
<body>
    <div id="container">

        <span id="timer">12</span>

        <button id="pause">Pause</button>

        <button id="skip">Skip</button>

    </div>

<script>
    //Initialization--------------------------------------------------
    var poses = [
        {
            name:'basic',
            image:'basic.jpg',
            timer: 3
        },
        {
            name:'shoulder',
            image:'shoulder.jpg',
            timer: 5
        },
    ];
    var intervalId = 0;
    var poseIndex = 0;
    var paused = false;
    var containerEl = document.getElementById('container');
    var timerEl = document.getElementById('timer');

    setTimer(poses, containerEl, timerEl, 0);


    //Set background, timer text to show and 1s interval
    function setTimer(poses, containerEl, timerEl, startTime) {
        containerEl.style.backgroundImage = "url('" + poses[poseIndex].image + "')";
        timerEl.innerText = poses[poseIndex].timer - startTime;

        var i = startTime;
        intervalId = setInterval(function(){
            i++;
            timerEl.innerText = poses[poseIndex].timer - i;

            if (i==poses[poseIndex].timer) {
                clearInterval(intervalId);
                poseIndex++;
                if (poseIndex<poses.length) {
                    setTimer(poses, containerEl, timerEl, 0);
                };
            };
        }, 1000);
    }


    //Pause button handling
    var pauseButton = document.getElementById('pause');
    pauseButton.addEventListener("click", function(){
        paused = !paused;
        if (paused) {
            clearInterval(intervalId);
        } else if (poseIndex<poses.length) {
            setTimer(poses, containerEl, timerEl, poses[poseIndex].timer - timerEl.innerText);
        };
    });


    //Skip button handling
    var skipButton = document.getElementById('skip');
    skipButton.addEventListener("click", function(){
        clearInterval(intervalId);
        poseIndex++;
        if (poseIndex<poses.length) {
            setTimer(poses, containerEl, timerEl, 0);
        } else {
            timerEl.innerText = 0;
        };
    });

</script>
</body>
</html>